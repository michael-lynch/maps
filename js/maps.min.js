/*!

Name: Maps
Dependencies: jQuery
Author: Michael Lynch
Author URL: http://michaelynch.com
Date Created: June 25 2015
Licensed under the MIT license

*/

!function(e){e.fn.maps=function(o){function a(){n.each(function(){console.log(e(this)[0]);var o={center:{lat:r.lat,lng:r.lng},zoom:r.zoom,scrollwheel:r.scrollwheel?r.scrollwheel:!1,draggable:r.draggable?r.draggable:!0,disableDefaultUI:r.disable_ui?r.disable_ui:!1,zoomControl:r.zoom_control?r.zoom_control:!0},a=new google.maps.Map(e(this)[0],o);if(r.markers)for(var t=0;t<r.markers.length;t++){var l=i({map:a,lat:r.markers[t].lat,lng:r.markers[t].lng});l&&r.markers[t].info_window.template&&s({map:a,marker:l,template:r.markers[t].info_window.template})}}),r.success.call(this)}if(!this.length)return this;var t={load_api:!0,lat:null,lng:null,markers:[],scrollwheel:!1,draggable:!0,disable_ui:!1,zoom_control:!0,error:function(){},success:function(){}},l=this,n=e(this);l.settings={},l.settings=e.extend({},t,o);var r=l.settings,i=function(e){if(e.map){var o=new google.maps.LatLng(e.lat,e.lng),a=new google.maps.Marker({position:o?o:null,map:e.map?e.map:null,title:e.title?e.title:null});return a}return!1},s=function(e){var o=e.template,a=new google.maps.InfoWindow({content:o});google.maps.event.addListener(e.marker,"click",function(){a.open(e.map,e.marker)})};if("object"==typeof window.google&&"object"==typeof window.google.maps&&a(),r.load_api){var m=document.createElement("script");m.type="text/javascript",m.src="http://maps.google.com/maps/api/js?v=3&sensor=true&callback=gmap_draw",e("head").append(m)}window.gmap_draw=function(){function e(){a()}google.maps.event.addDomListener(window,"load",e)}}}(jQuery);